app.service('BooksService', [ '$http', function($http){
    var availableBooks = [
  {
   "kind": "books#volume",
   "id": "zN6Ma8P0SxQC",
   "etag": "7RuUxlsg2u8",
   "selfLink": "https://www.googleapis.com/books/v1/volumes/zN6Ma8P0SxQC",
   "volumeInfo": {
    "title": "A Guide for Using Harry Potter and the Sorcerer's Stone/Other Harry Potter Books in the Classroom",
    "authors": [
     "Michelle Breyer",
     "Michelle"
    ],
    "publisher": "Teacher Created Resources",
    "publishedDate": "2002-06-01",
    "industryIdentifiers": [
     {
      "type": "ISBN_13",
      "identifier": "9781576906385"
     },
     {
      "type": "ISBN_10",
      "identifier": "1576906388"
     }
    ],
    "readingModes": {
     "text": true,
     "image": false
    },
    "pageCount": 48,
    "printType": "BOOK",
    "categories": [
     "Activity programs in education"
    ],
    "averageRating": 5.0,
    "ratingsCount": 2,
    "maturityRating": "NOT_MATURE",
    "allowAnonLogging": false,
    "contentVersion": "preview-1.0.0",
    "imageLinks": {
     "smallThumbnail": "http://books.google.co.in/books/content?id=zN6Ma8P0SxQC&printsec=frontcover&img=1&zoom=5&edge=curl&source=gbs_api",
     "thumbnail": "http://books.google.co.in/books/content?id=zN6Ma8P0SxQC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"
    },
    "language": "nl",
    "previewLink": "http://books.google.co.in/books?id=zN6Ma8P0SxQC&printsec=frontcover&dq=intitle:Harry+potter+and+the&hl=&cd=1&source=gbs_api",
    "infoLink": "http://books.google.co.in/books?id=zN6Ma8P0SxQC&dq=intitle:Harry+potter+and+the&hl=&source=gbs_api",
    "canonicalVolumeLink": "http://books.google.co.in/books/about/A_Guide_for_Using_Harry_Potter_and_the_S.html?hl=&id=zN6Ma8P0SxQC"
   },
   "saleInfo": {
    "country": "IN",
    "saleability": "NOT_FOR_SALE",
    "isEbook": false
   },
   "accessInfo": {
    "country": "IN",
    "viewability": "PARTIAL",
    "embeddable": true,
    "publicDomain": false,
    "textToSpeechPermission": "ALLOWED",
    "epub": {
     "isAvailable": true,
     "acsTokenLink": "http://books.google.co.in/books/download/A_Guide_for_Using_Harry_Potter_and_the_S-sample-epub.acsm?id=zN6Ma8P0SxQC&format=epub&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api"
    },
    "pdf": {
     "isAvailable": false
    },
    "webReaderLink": "http://books.google.co.in/books/reader?id=zN6Ma8P0SxQC&hl=&printsec=frontcover&output=reader&source=gbs_api",
    "accessViewStatus": "SAMPLE",
    "quoteSharingAllowed": false
   }
  },
  {
   "kind": "books#volume",
   "id": "FCoABwAAQBAJ",
   "etag": "efn/YxVBntM",
   "selfLink": "https://www.googleapis.com/books/v1/volumes/FCoABwAAQBAJ",
   "volumeInfo": {
    "title": "Harry Potter and the Chamber of Secrets (Book 2)",
    "authors": [
     "Rowling, Joanne"
    ],
    "publisher": "Pottermore",
    "publishedDate": "2015-01-10",
    "description": "In Harry Potter and the Chamber of Secrets, the summer after Harry’s first year at Hogwarts has been his worst summer ever… the Dursleys more distant and horrible than ever before. But just as he’s packing his bags to return to school, a creature named Dobby the house-elf announces that if Harry goes back to Hogwarts, disaster will strike. And it turns out, Dobby is right. Harry and Ron miss the Hogwarts Express, so they fly to school in a blue Ford Anglia, crash landing in the notorious Whomping Willow. Soon other worries accumulate: the outrageously stuck-up new professor Gilderoy Lockhart; a ghost named Moaning Myrtle, who haunts the girls' bathroom; the strange behavior of Ron's little sister, Ginny Weasley; rumors about the \"Chamber of Secrets,\" a cavern buried deep below Hogwarts; and a magical diary owned by Tom Riddle, a Hogwarts student of long ago. Harry is also shocked to discover that he can speak Parseltongue, the language of snakes - a rare ability that Lord Voldemort also possessed - and that anti-Muggle prejudice exists in the Wizarding world, even affecting Harry's friend Hermione. But all of these seem like minor concerns when someone starts turning Hogwarts students to stone: an evildoer said to be the fearsome Heir of Salazar Slytherin, on of the founders of the school. Could it be Draco Malfoy, Harry's most poisonous rival? Could it be Hagrid whose mysterious past is finally told? Or could it be the one person everyone at Hogwarts most suspects: Harry Potter himself?",
    "readingModes": {
     "text": true,
     "image": false
    },
    "pageCount": 341,
    "printType": "BOOK",
    "categories": [
     "Juvenile Fiction"
    ],
    "maturityRating": "NOT_MATURE",
    "allowAnonLogging": false,
    "contentVersion": "1.1.1.0.preview.2",
    "imageLinks": {
     "smallThumbnail": "http://books.google.co.in/books/content?id=FCoABwAAQBAJ&printsec=frontcover&img=1&zoom=5&source=gbs_api",
     "thumbnail": "http://books.google.co.in/books/content?id=FCoABwAAQBAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api"
    },
    "language": "en",
    "previewLink": "http://books.google.co.in/books?id=FCoABwAAQBAJ&dq=intitle:Harry+potter+and+the&hl=&cd=2&source=gbs_api",
    "infoLink": "http://books.google.co.in/books?id=FCoABwAAQBAJ&dq=intitle:Harry+potter+and+the&hl=&source=gbs_api",
    "canonicalVolumeLink": "http://books.google.co.in/books/about/Harry_Potter_and_the_Chamber_of_Secrets.html?hl=&id=FCoABwAAQBAJ"
   },
   "saleInfo": {
    "country": "IN",
    "saleability": "NOT_FOR_SALE",
    "isEbook": false
   },
   "accessInfo": {
    "country": "IN",
    "viewability": "NO_PAGES",
    "embeddable": false,
    "publicDomain": false,
    "textToSpeechPermission": "ALLOWED",
    "epub": {
     "isAvailable": true
    },
    "pdf": {
     "isAvailable": true
    },
    "webReaderLink": "http://books.google.co.in/books/reader?id=FCoABwAAQBAJ&hl=&printsec=frontcover&output=reader&source=gbs_api",
    "accessViewStatus": "NONE",
    "quoteSharingAllowed": false
   },
   "searchInfo": {
    "textSnippet": "In Harry Potter and the Chamber of Secrets, the summer after Harry’s first year at Hogwarts has been his worst summer ever… the Dursleys more distant and horrible than ever before."
   }
  },
  {
   "kind": "books#volume",
   "id": "jlw9AwAAQBAJ",
   "etag": "AdI/LWJMjZE",
   "selfLink": "https://www.googleapis.com/books/v1/volumes/jlw9AwAAQBAJ",
   "volumeInfo": {
    "title": "Harry Potter and the Half-Blood Prince",
    "authors": [
     "J. K. Rowling"
    ],
    "publisher": "A&C Black",
    "publishedDate": "2013",
    "description": "As Voldemort's sinister forces amass and a spirit of gloom and fear sweeps the land, it becomes increasingly clear to Harry that he will soon have to confront his destiny. But will he be able to overcome the challenges ahead of him? The race to locate and destroy the remaining Horcruxes, the hidden pieces of Voldemort's soul, begins. Harry will need all the help he can get.",
    "industryIdentifiers": [
     {
      "type": "ISBN_13",
      "identifier": "9781408835012"
     },
     {
      "type": "ISBN_10",
      "identifier": "1408835010"
     }
    ],
    "readingModes": {
     "text": false,
     "image": true
    },
    "pageCount": 608,
    "printType": "BOOK",
    "categories": [
     "Children's stories"
    ],
    "averageRating": 4.5,
    "ratingsCount": 1701,
    "maturityRating": "NOT_MATURE",
    "allowAnonLogging": false,
    "contentVersion": "preview-1.0.0",
    "imageLinks": {
     "smallThumbnail": "http://books.google.co.in/books/content?id=jlw9AwAAQBAJ&printsec=frontcover&img=1&zoom=5&edge=curl&source=gbs_api",
     "thumbnail": "http://books.google.co.in/books/content?id=jlw9AwAAQBAJ&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"
    },
    "language": "en",
    "previewLink": "http://books.google.co.in/books?id=jlw9AwAAQBAJ&pg=PA7&dq=intitle:Harry+potter+and+the&hl=&cd=3&source=gbs_api",
    "infoLink": "http://books.google.co.in/books?id=jlw9AwAAQBAJ&dq=intitle:Harry+potter+and+the&hl=&source=gbs_api",
    "canonicalVolumeLink": "http://books.google.co.in/books/about/Harry_Potter_and_the_Half_Blood_Prince.html?hl=&id=jlw9AwAAQBAJ"
   },
   "saleInfo": {
    "country": "IN",
    "saleability": "NOT_FOR_SALE",
    "isEbook": false
   },
   "accessInfo": {
    "country": "IN",
    "viewability": "PARTIAL",
    "embeddable": true,
    "publicDomain": false,
    "textToSpeechPermission": "ALLOWED",
    "epub": {
     "isAvailable": false
    },
    "pdf": {
     "isAvailable": false
    },
    "webReaderLink": "http://books.google.co.in/books/reader?id=jlw9AwAAQBAJ&hl=&printsec=frontcover&output=reader&source=gbs_api",
    "accessViewStatus": "SAMPLE",
    "quoteSharingAllowed": false
   },
   "searchInfo": {
    "textSnippet": "It was nearing midnight and \u003cb\u003ethe\u003c/b\u003e Prime Minister was sitting alone in his office, \u003cbr\u003e\nreading a long memo that was slipping through his brain without leaving \u003cb\u003ethe\u003c/b\u003e \u003cbr\u003e\nslightest trace of meaning behind. He was waiting for a call from \u003cb\u003ethe\u003c/b\u003e president of \u003cbr\u003e\na&nbsp;..."
   }
  },
  {
   "kind": "books#volume",
   "id": "DKcWE3WXoj8C",
   "etag": "+X4lw46Ddtw",
   "selfLink": "https://www.googleapis.com/books/v1/volumes/DKcWE3WXoj8C",
   "volumeInfo": {
    "title": "Harry Potter and International Relations",
    "authors": [
     "Daniel H. Nexon",
     "Iver B. Neumann"
    ],
    "publisher": "Rowman & Littlefield",
    "publishedDate": "2006-01-01",
    "description": "Drawing on a range of historical and sociological sources, this work shows how aspects of Harry's world contain aspects of our own. It also includes chapters on the political economy of the franchise, and on the problems of studying popular culture.",
    "industryIdentifiers": [
     {
      "type": "ISBN_10",
      "identifier": "0742539598"
     },
     {
      "type": "ISBN_13",
      "identifier": "9780742539594"
     }
    ],
    "readingModes": {
     "text": false,
     "image": true
    },
    "pageCount": 245,
    "printType": "BOOK",
    "categories": [
     "Literary Criticism"
    ],
    "averageRating": 3.5,
    "ratingsCount": 14,
    "maturityRating": "NOT_MATURE",
    "allowAnonLogging": false,
    "contentVersion": "preview-1.0.0",
    "imageLinks": {
     "smallThumbnail": "http://books.google.co.in/books/content?id=DKcWE3WXoj8C&printsec=frontcover&img=1&zoom=5&edge=curl&source=gbs_api",
     "thumbnail": "http://books.google.co.in/books/content?id=DKcWE3WXoj8C&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"
    },
    "language": "en",
    "previewLink": "http://books.google.co.in/books?id=DKcWE3WXoj8C&printsec=frontcover&dq=intitle:Harry+potter+and+the&hl=&cd=4&source=gbs_api",
    "infoLink": "http://books.google.co.in/books?id=DKcWE3WXoj8C&dq=intitle:Harry+potter+and+the&hl=&source=gbs_api",
    "canonicalVolumeLink": "http://books.google.co.in/books/about/Harry_Potter_and_International_Relations.html?hl=&id=DKcWE3WXoj8C"
   },
   "saleInfo": {
    "country": "IN",
    "saleability": "NOT_FOR_SALE",
    "isEbook": false
   },
   "accessInfo": {
    "country": "IN",
    "viewability": "PARTIAL",
    "embeddable": true,
    "publicDomain": false,
    "textToSpeechPermission": "ALLOWED",
    "epub": {
     "isAvailable": false
    },
    "pdf": {
     "isAvailable": true,
     "acsTokenLink": "http://books.google.co.in/books/download/Harry_Potter_and_International_Relations-sample-pdf.acsm?id=DKcWE3WXoj8C&format=pdf&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api"
    },
    "webReaderLink": "http://books.google.co.in/books/reader?id=DKcWE3WXoj8C&hl=&printsec=frontcover&output=reader&source=gbs_api",
    "accessViewStatus": "SAMPLE",
    "quoteSharingAllowed": false
   },
   "searchInfo": {
    "textSnippet": "Drawing on a range of historical and sociological sources, this work shows how aspects of Harry&#39;s world contain aspects of our own."
   }
  },
  {
   "kind": "books#volume",
   "id": "_oaAHiFOZmgC",
   "etag": "Uof0vQUoHGQ",
   "selfLink": "https://www.googleapis.com/books/v1/volumes/_oaAHiFOZmgC",
   "volumeInfo": {
    "title": "Harry Potter and the Deathly Hallows",
    "authors": [
     "J. K. Rowling"
    ],
    "publisher": "Pottermore",
    "publishedDate": "2007",
    "description": "The magnificent final book in J. K. Rowling's seven-part saga comes to readers July 21, 2007. You'll find out July 21!",
    "industryIdentifiers": [
     {
      "type": "ISBN_13",
      "identifier": "9780545010221"
     },
     {
      "type": "ISBN_10",
      "identifier": "0545010225"
     }
    ],
    "readingModes": {
     "text": true,
     "image": false
    },
    "pageCount": 759,
    "printType": "BOOK",
    "categories": [
     "Juvenile Fiction"
    ],
    "averageRating": 4.5,
    "ratingsCount": 1886,
    "maturityRating": "NOT_MATURE",
    "allowAnonLogging": false,
    "contentVersion": "0.2.2.0.preview.2",
    "imageLinks": {
     "smallThumbnail": "http://books.google.co.in/books/content?id=_oaAHiFOZmgC&printsec=frontcover&img=1&zoom=5&source=gbs_api",
     "thumbnail": "http://books.google.co.in/books/content?id=_oaAHiFOZmgC&printsec=frontcover&img=1&zoom=1&source=gbs_api"
    },
    "language": "en",
    "previewLink": "http://books.google.co.in/books?id=_oaAHiFOZmgC&dq=intitle:Harry+potter+and+the&hl=&cd=5&source=gbs_api",
    "infoLink": "http://books.google.co.in/books?id=_oaAHiFOZmgC&dq=intitle:Harry+potter+and+the&hl=&source=gbs_api",
    "canonicalVolumeLink": "http://books.google.co.in/books/about/Harry_Potter_and_the_Deathly_Hallows.html?hl=&id=_oaAHiFOZmgC"
   },
   "saleInfo": {
    "country": "IN",
    "saleability": "NOT_FOR_SALE",
    "isEbook": false
   },
   "accessInfo": {
    "country": "IN",
    "viewability": "NO_PAGES",
    "embeddable": false,
    "publicDomain": false,
    "textToSpeechPermission": "ALLOWED",
    "epub": {
     "isAvailable": true
    },
    "pdf": {
     "isAvailable": true
    },
    "webReaderLink": "http://books.google.co.in/books/reader?id=_oaAHiFOZmgC&hl=&printsec=frontcover&output=reader&source=gbs_api",
    "accessViewStatus": "NONE",
    "quoteSharingAllowed": false
   },
   "searchInfo": {
    "textSnippet": "The magnificent final book in J. K. Rowling&#39;s seven-part saga comes to readers July 21, 2007. You&#39;ll find out July 21!"
   }
  }
 ];
    var defaultThumbnail = 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTcxIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDE3MSAxODAiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiPjwhLS0KU291cmNlIFVSTDogaG9sZGVyLmpzLzEwMCV4MTgwCkNyZWF0ZWQgd2l0aCBIb2xkZXIuanMgMi42LjAuCkxlYXJuIG1vcmUgYXQgaHR0cDovL2hvbGRlcmpzLmNvbQooYykgMjAxMi0yMDE1IEl2YW4gTWFsb3BpbnNreSAtIGh0dHA6Ly9pbXNreS5jbwotLT48ZGVmcz48c3R5bGUgdHlwZT0idGV4dC9jc3MiPjwhW0NEQVRBWyNob2xkZXJfMTUxNGU1MzczMDAgdGV4dCB7IGZpbGw6I0FBQUFBQTtmb250LXdlaWdodDpib2xkO2ZvbnQtZmFtaWx5OkFyaWFsLCBIZWx2ZXRpY2EsIE9wZW4gU2Fucywgc2Fucy1zZXJpZiwgbW9ub3NwYWNlO2ZvbnQtc2l6ZToxMHB0IH0gXV0+PC9zdHlsZT48L2RlZnM+PGcgaWQ9ImhvbGRlcl8xNTE0ZTUzNzMwMCI+PHJlY3Qgd2lkdGg9IjE3MSIgaGVpZ2h0PSIxODAiIGZpbGw9IiNFRUVFRUUiLz48Zz48dGV4dCB4PSI1OS41NTQ2ODc1IiB5PSI5NC41Ij4xNzF4MTgwPC90ZXh0PjwvZz48L2c+PC9zdmc+';
    this.rentalBooks = function(options){
        return $http.get('/bookworm/api/books/rental/all', {params : options});
    };
    this.lendBook = function(options) {
        return $http.post('/bookworm/api/books/rental/add', options,{timeout: 1000});
    };
    this.parseGBookToBook = function(gBook) {
        var item = {};
        item.description = gBook.volumeInfo.description;
        item.bookName = gBook.volumeInfo.title;
        if(gBook.volumeInfo.authors && gBook.volumeInfo.authors.length > 0){
            item.authorName = gBook.volumeInfo.authors;
        }
        item.thumbnail = gBook.volumeInfo.imageLinks ? gBook.volumeInfo.imageLinks.thumbnail : defaultThumbnail;
        
        item.googleId = gBook.id;
        var indId = gBook.volumeInfo.industryIdentifiers;
        for(var indInd in indId) {
            if(indId[indInd].type === 'ISBN_10') {
                item.isbn = indId[indInd].identifier;
            }
        }
        return item;
    };
    var allGenres = ['History','Romance','Drama','Mystery', 'Science', 'Fiction','Thriller','Comedy'];
    this.availableGenres = function(){
        return allGenres;
    };
}])